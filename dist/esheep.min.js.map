{"version":3,"sources":["esheep.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","VERSION","ACTIVATE_DEBUG","DEFAULT_XML","COLLISION_WITH","xmlStorage","storageExists","window","sessionStorage","eSheep","options","isChild","this","userOptions","allowPets","allowPopup","animationFile","id","Date","now","Math","random","DOMdiv","document","createElement","setAttribute","DOMimg","DOMinfo","parser","DOMParser","xmlDoc","prepareToDie","tilesX","tilesY","imageW","imageH","imageX","imageY","flipped","dragging","infobox","animationId","animationStep","animationNode","sprite","Image","HTMLelement","randS","screenW","innerWidth","documentElement","clientWidth","body","screenH","innerHeight","clientHeight","value","animation","ajax","XMLHttpRequest","sheepClass","name","cache","getItem","open","addEventListener","readyState","status","setItem","responseText","_parseXML","console","error","statusText","send","_this","Hide","setTimeout","getElementById","outerHTML","text","_this2","undefined","parseFromString","image","getElementsByTagName","textContent","log","attribute","width","height","e","preventDefault","appendChild","_spawnChild","_spawnESheep","src","buttons","button","childs","k","getAttribute","parseInt","clientX","clientY","style","left","top","min","max","Show","headerNode","htmlT","createTextNode","htmlV","htmlL","htmlP","_loadPetList","display","transform","x","y","absolute","spawns","prob","rand","_setPosition","_parseKeyWords","j","eSheepChild","Start","_nextESheepStep","replace","ret","eval","err","message","parentNode","baseNode","nodeFound","removeChild","index","rect","margin","els","getBoundingClientRect","right","getComputedStyle","borderTopStyle","nodeName","valueName","defaultValue","x1","_getNodeValue","y1","del1","x2","y2","del2","repeat","repeatfrom","gravity","border","steps","bind","_getNextRandomNode","setNext","_checkOverlapping","ceil","element","_this3","fetch","credentials","then","response","json","pets","stopPropagation","div","_loop","pet","folder","remove"],"mappings":"AAAA,aAEA,SAASA,gBAAgBC,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAEhH,SAASC,kBAAkBC,EAAQC,GAAS,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,IAAIE,EAAaH,EAAMC,GAAIE,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAE7S,SAASO,aAAad,EAAae,EAAYC,GAAyN,OAAtMD,GAAYb,kBAAkBF,EAAYiB,UAAWF,GAAiBC,GAAad,kBAAkBF,EAAagB,GAAcL,OAAOC,eAAeZ,EAAa,YAAa,CAAEU,UAAU,IAAiBV,EAgE/Q,IAAIkB,QAAU,QAEVC,gBAAiB,EAEjBC,YAAc,yEAEdC,eAAiB,CAAC,MAAO,MAEzBC,WAAa,IAAIX,OAEjBY,mBAAiD,IAA1BC,OAAOC,gBAA2D,MAAzBD,OAAOC,eAQvEC,OAAsB,WAKxB,SAASA,OAAOC,EAASC,GACvB9B,gBAAgB+B,KAAMH,QAEtBG,KAAKC,YAAcH,GAAoB,CACrCI,UAAW,OACXC,WAAY,OAETH,KAAKC,YAAYE,aAAYH,KAAKC,YAAYE,WAAa,OAC3DH,KAAKC,YAAYC,YAAWF,KAAKC,YAAYC,UAAY,QAE9DF,KAAKI,cAAgBb,YACrBS,KAAKK,GAAKC,KAAKC,MAAQC,KAAKC,SAC5BT,KAAKU,OAASC,SAASC,cAAc,OAErCZ,KAAKU,OAAOG,aAAa,KAAMb,KAAKK,IACpCL,KAAKc,OAASH,SAASC,cAAc,OAErCZ,KAAKe,QAAUJ,SAASC,cAAc,OAEtCZ,KAAKgB,OAAS,IAAIC,UAElBjB,KAAKkB,OAAS,KAEdlB,KAAKmB,cAAe,EAEpBnB,KAAKD,QAAqB,MAAXA,EAEfC,KAAKoB,OAAS,EAEdpB,KAAKqB,OAAS,EAEdrB,KAAKsB,OAAS,EAEdtB,KAAKuB,OAAS,EAEdvB,KAAKwB,OAAS,EAEdxB,KAAKyB,OAAS,EAEdzB,KAAK0B,SAAU,EAEf1B,KAAK2B,UAAW,EAEhB3B,KAAK4B,SAAU,EAEf5B,KAAK6B,YAAc,EAEnB7B,KAAK8B,cAAgB,EAErB9B,KAAK+B,cAAgB,KAErB/B,KAAKgC,OAAS,IAAIC,MAElBjC,KAAKkC,YAAc,KAEnBlC,KAAKmC,MAAwB,IAAhB3B,KAAKC,SAElBT,KAAKoC,QAAUzC,OAAO0C,YAAc1B,SAAS2B,gBAAgBC,aAAe5B,SAAS6B,KAAKD,YAE1FvC,KAAKyC,QAAU9C,OAAO+C,aAAe/B,SAAS2B,gBAAgBK,cAAgBhC,SAAS6B,KAAKG,aAmrB9F,OA3qBA1D,aAAaY,OAAQ,CAAC,CACpBb,IAAK,QACL4D,MAAO,SAAeC,QACK,IAAdA,GAA0C,MAAbA,IACtC7C,KAAKI,cAAgByC,GAGvB,IAAIC,EAAO,IAAIC,eACXC,EAAahD,KACbiD,EAAOjD,KAAKI,cAAgB,QAC5B8C,EAAQxD,cAAgBC,OAAOC,eAAeuD,QAAQF,GAAQxD,WAAWwD,GAE/D,OAAVC,GACFJ,EAAKM,KAAK,MAAOpD,KAAKI,eAAe,GACrC0C,EAAKO,iBAAiB,mBAAoB,WACjB,GAAnBrD,KAAKsD,aACY,KAAftD,KAAKuD,QAEH7D,cAAeC,OAAOC,eAAe4D,QAAQP,EAAMjD,KAAKyD,cACvDhE,WAAWwD,GAAQjD,KAAKyD,aAC7B9D,OAAOC,eAAe4D,QAAQP,EAAMjD,KAAKyD,cAEzCT,EAAWU,UAAU1D,KAAKyD,eAE1BE,QAAQC,MAAM,qBAAuB5D,KAAK6D,WAAa,KAAO7D,KAAKyD,iBAIzEX,EAAKgB,KAAK,OAEVd,EAAWU,UAAUR,KAGxB,CACDlE,IAAK,SACL4D,MAAO,WACL,IAAImB,EAAQ/D,KAEZA,KAAKmB,cAAe,EACpBnB,KAAKe,QAAQiD,OACbC,WAAW,WACTF,EAAMrD,OAASqD,EAAMjD,OAASiD,EAAMhD,QAAU,KAC9CJ,SAASuD,eAAeH,EAAM1D,IAAI8D,UAAY,IAC7C,OAMJ,CACDnF,IAAK,YACL4D,MAAO,SAAmBwB,GACxB,IAAIC,EAASrE,KAETkD,EAAQzD,WAAWO,KAAKI,oBAEdkE,IAAVpB,GACFlD,KAAKkB,OAASlB,KAAKgB,OAAOuD,gBAAgBH,EAAM,YAChD3E,WAAWO,KAAKI,eAAiBJ,KAAKkB,QAEtClB,KAAKkB,OAASgC,EAGhB,IAAIsB,EAAQxE,KAAKkB,OAAOuD,qBAAqB,SAAS,GACtDzE,KAAKoB,OAASoD,EAAMC,qBAAqB,UAAU,GAAGC,YACtD1E,KAAKqB,OAASmD,EAAMC,qBAAqB,UAAU,GAAGC,YAGtD1E,KAAKgC,OAAOqB,iBAAiB,OAAQ,WAC/B/D,gBAAgBqE,QAAQgB,IAAI,uBAChC,IAAIC,EAAY,SAAWP,EAAOrC,OAAO6C,MAAQ,aAAoBR,EAAOrC,OAAO8C,OAAS,yDAE5FT,EAAOvD,OAAOD,aAAa,QAAS+D,GAGpCP,EAAOvD,OAAOuC,iBAAiB,YAAa,SAAU0B,GAEpD,OADAA,EAAEC,kBACK,IAGTX,EAAO/C,OAAS+C,EAAOrC,OAAO6C,MAAQR,EAAOjD,OAC7CiD,EAAO9C,OAAS8C,EAAOrC,OAAO8C,OAAST,EAAOhD,OAC9CuD,EAAY,SAAWP,EAAO/C,OAAS,aAAoB+C,EAAO9C,OAAS,yBAAqC8C,EAAO5C,OAAS,WAAkB4C,EAAO7C,OAAS,oGAElK6C,EAAO3D,OAAOG,aAAa,QAAS+D,GAEpCP,EAAO3D,OAAOuE,YAAYZ,EAAOvD,QAE7BuD,EAAOtE,QAASsE,EAAOa,cAAmBb,EAAOc,iBAEvDnF,KAAKgC,OAAOoD,IAAM,yBAA2BZ,EAAMC,qBAAqB,OAAO,GAAGC,YAClF1E,KAAKc,OAAOD,aAAa,MAAOb,KAAKgC,OAAOoD,KAE5CpF,KAAKU,OAAO2C,iBAAiB,YAAa,SAAU0B,GAClD,IAAKV,EAAO1C,UAAyB,GAAboD,EAAEM,SAA4B,GAAZN,EAAEO,OAAa,CACvDjB,EAAO1C,UAAW,EAClB0C,EAAOnC,YAAc,KAMrB,IAJA,IAEIqD,EAFalB,EAAOnD,OAAOuD,qBAAqB,cAAc,GAE1CA,qBAAqB,aAEpCe,EAAI,EAAGA,EAAID,EAAO9G,OAAQ+G,IACjC,GAA6D,QAAzDD,EAAOC,GAAGf,qBAAqB,QAAQ,GAAGC,YAAuB,CACnEL,EAAOxC,YAAc0D,EAAOC,GAAGC,aAAa,MAC5CpB,EAAOvC,cAAgB,EACvBuC,EAAOtC,cAAgBwD,EAAOC,GAC9B,UAMR7E,SAAS6B,KAAKa,iBAAiB,YAAa,SAAU0B,GAChDV,EAAO1C,WACT0C,EAAO7C,OAASkE,SAASX,EAAEY,SAAWtB,EAAO/C,OAAS,EACtD+C,EAAO5C,OAASiE,SAASX,EAAEa,SAAWvB,EAAO9C,OAAS,EACtD8C,EAAO3D,OAAOmF,MAAMC,KAAOzB,EAAO7C,OAAS,KAC3C6C,EAAO3D,OAAOmF,MAAME,IAAM1B,EAAO5C,OAAS,KAC1C4C,EAAOtD,QAAQ8E,MAAMC,KAAOJ,SAASrB,EAAO7C,OAAS6C,EAAO/C,OAAS,GAAK,KAC1E+C,EAAOtD,QAAQ8E,MAAME,IAAM1B,EAAO5C,OAAS,QAI/Cd,SAAS6B,KAAKa,iBAAiB,SAAU,WACvCgB,EAAOjC,QAAUzC,OAAO0C,YAAc1B,SAAS2B,gBAAgBC,aAAe5B,SAAS6B,KAAKD,YAC5F8B,EAAO5B,QAAU9C,OAAO+C,aAAe/B,SAAS2B,gBAAgBK,cAAgBhC,SAAS6B,KAAKG,aAE1F0B,EAAO5C,OAAS4C,EAAO9C,OAAS8C,EAAO5B,UACzC4B,EAAO5C,OAAS4C,EAAO5B,QAAU4B,EAAO9C,OACxC8C,EAAO3D,OAAOmF,MAAME,IAAM1B,EAAO5C,OAAS,MAGxC4C,EAAO7C,OAAS6C,EAAO/C,OAAS+C,EAAOjC,UACzCiC,EAAO7C,OAAS6C,EAAOjC,QAAUiC,EAAO/C,OACxC+C,EAAO3D,OAAOmF,MAAMC,KAAOzB,EAAO7C,OAAS,QAI/CxB,KAAKU,OAAO2C,iBAAiB,cAAe,SAAU0B,GAEpD,OADAA,EAAEC,kBACK,IAGThF,KAAKU,OAAO2C,iBAAiB,UAAW,SAAU0B,GAC5CV,EAAO1C,SACT0C,EAAO1C,UAAW,EACT0C,EAAOzC,SAChByC,EAAOtD,QAAQiD,OAEfK,EAAOzC,SAAU,GAEqB,QAAlCyC,EAAOpE,YAAYE,aACrBkE,EAAOtD,QAAQ8E,MAAMC,KAAOtF,KAAKwF,IAAI3B,EAAOjC,QAAUiC,EAAO/C,OAAQd,KAAKyF,IAAI5B,EAAO/C,OAAQoE,SAASrB,EAAO7C,OAAS6C,EAAO/C,OAAS,KAAO,KAC7I+C,EAAOtD,QAAQ8E,MAAME,IAAML,SAASrB,EAAO5C,QAAU,KAErD4C,EAAOtD,QAAQmF,OAEf7B,EAAOzC,SAAU,KAKvB5B,KAAKe,QAAQsC,iBAAiB,UAAW,SAAU0B,GACjDV,EAAOtD,QAAQiD,OAEfK,EAAOzC,SAAU,IAInB5B,KAAKe,QAAQF,aAAa,QADV,ocAEhB,IAAIsF,EAAanG,KAAKkB,OAAOuD,qBAAqB,UAAU,GACxD2B,EAAQzF,SAASC,cAAc,KAAKqE,YAAYtE,SAAS0F,eAAeF,EAAW1B,qBAAqB,SAAS,GAAGC,cACpH4B,EAAQ3F,SAASC,cAAc,OAC/B2F,EAAQ5F,SAASC,cAAc,KAC/B4F,EAAQ7F,SAASC,cAAc,KACnC0F,EAAMrB,YAAYtE,SAAS0F,eAAe,SAAWhH,UACrDiH,EAAMrB,YAAYtE,SAASC,cAAc,OACzC0F,EAAMrB,YAAYtE,SAAS0F,eAAe,SAAWF,EAAW1B,qBAAqB,WAAW,GAAGC,cACnG4B,EAAMzF,aAAa,QAAS,iCAC5B0F,EAAMtB,YAAYtE,SAAS0F,eAAe,OAC1CE,EAAM1F,aAAa,OAAQ,8CAC3B0F,EAAM1F,aAAa,SAAU,UAC7B0F,EAAM1F,aAAa,QAAS,cAC5B2F,EAAMvB,YAAYtE,SAAS0F,eAAeF,EAAW1B,qBAAqB,QAAQ,GAAGC,cACrF8B,EAAM3F,aAAa,QAAS,cAAgB,IAAM6E,SAASS,EAAW1B,qBAAqB,QAAQ,GAAGC,YAAYjG,OAAS,KAAO,MAClIuB,KAAKe,QAAQkE,YAAYqB,GACzBtG,KAAKe,QAAQkE,YAAYsB,GAEU,SAA/BvG,KAAKC,YAAYC,aACnBqG,EAAQ5F,SAASC,cAAc,MACzBqE,YAAYtE,SAAS0F,eAAe,MAC1CE,EAAM1F,aAAa,OAAQ,gBAC3B0F,EAAM1F,aAAa,QAAS,cAC5Bb,KAAKe,QAAQkE,YAAYsB,GACzBtC,WAAW,WACTI,EAAOoC,aAAaF,IACnB,MAGLvG,KAAKe,QAAQkE,YAAYmB,GACzBpG,KAAKe,QAAQkE,YAAYtE,SAASC,cAAc,OAChDZ,KAAKe,QAAQkE,YAAYtE,SAASC,cAAc,OAChDZ,KAAKe,QAAQkE,YAAYuB,GAEzB7F,SAAS6B,KAAKyC,YAAYjF,KAAKe,SAC/BJ,SAAS6B,KAAKyC,YAAYjF,KAAKU,QAE/BV,KAAKe,QAAQmF,KAAO,WAClB7B,EAAOtD,QAAQ8E,MAAMa,QAAU,QAC/BrC,EAAOtD,QAAQ8E,MAAMc,UAAY,qCAGnC3G,KAAKe,QAAQiD,KAAO,WAClBK,EAAOtD,QAAQ8E,MAAMc,UAAY,mCACjC1C,WAAW,WACTI,EAAOtD,QAAQ8E,MAAMa,QAAU,QAC9B,QAGN,CACD1H,IAAK,eACL4D,MAMA,SAAsBgE,EAAGC,EAAGC,GACtB9G,KAAKU,SACHoG,GACF9G,KAAKwB,OAASkE,SAASkB,GACvB5G,KAAKyB,OAASiE,SAASmB,KAEvB7G,KAAKwB,OAASkE,SAAS1F,KAAKwB,QAAUkE,SAASkB,GAC/C5G,KAAKyB,OAASiE,SAAS1F,KAAKyB,QAAUiE,SAASmB,IAGjD7G,KAAKU,OAAOmF,MAAMC,KAAO9F,KAAKwB,OAAS,KACvCxB,KAAKU,OAAOmF,MAAME,IAAM/F,KAAKyB,OAAS,QAOzC,CACDzC,IAAK,eACL4D,MAAO,WAKL,IAJA,IACImE,EADa/G,KAAKkB,OAAOuD,qBAAqB,UAAU,GACpCA,qBAAqB,SACzCuC,EAAO,EAEFxI,EAAI,EAAGA,EAAIuI,EAAOtI,OAAQD,IACjCwI,GAAQtB,SAASqB,EAAO,GAAGtB,aAAa,gBAG1C,IAAIwB,EAAOzG,KAAKC,SAAWuG,EAG3B,IAFAA,EAAO,EAEFxI,EAAI,EAAGA,EAAIuI,EAAOtI,OAAQD,IAG7B,IAFAwI,GAAQtB,SAASqB,EAAOvI,GAAGiH,aAAa,kBAE5BwB,GAAQzI,GAAKuI,EAAOtI,OAAS,EAAG,CAC1CuB,KAAKkH,aAAalH,KAAKmH,eAAeJ,EAAOvI,GAAGiG,qBAAqB,KAAK,GAAGC,aAAc1E,KAAKmH,eAAeJ,EAAOvI,GAAGiG,qBAAqB,KAAK,GAAGC,cAAc,GAEhKpF,gBAAgBqE,QAAQgB,IAAI,UAAY3E,KAAKwB,OAAS,KAAOxB,KAAKyB,QACtEzB,KAAK6B,YAAckF,EAAOvI,GAAGiG,qBAAqB,QAAQ,GAAGC,YAC7D1E,KAAK8B,cAAgB,EAIrB,IAHA,IACIyD,EADavF,KAAKkB,OAAOuD,qBAAqB,cAAc,GACxCA,qBAAqB,aAEpCe,EAAI,EAAGA,EAAID,EAAO9G,OAAQ+G,IACjC,GAAID,EAAOC,GAAGC,aAAa,OAASzF,KAAK6B,YAAa,CACpD7B,KAAK+B,cAAgBwD,EAAOC,GAGxBD,EADavF,KAAKkB,OAAOuD,qBAAqB,UAAU,GACpCA,qBAAqB,SAE7C,IAHA,IAGS2C,EAAI,EAAGA,EAAI7B,EAAO9G,OAAQ2I,IACjC,GAAI7B,EAAO6B,GAAG3B,aAAa,gBAAkBzF,KAAK6B,YAAa,CACzDvC,gBAAgBqE,QAAQgB,IAAI,oBAChC,IAAI0C,EAAc,IAAIxH,OAAO,MAAM,GACnCwH,EAAYxF,YAAc0D,EAAO6B,GAAG3C,qBAAqB,QAAQ,GAAGC,YACpE,IAAIkC,EAAIrB,EAAO6B,GAAG3C,qBAAqB,KAAK,GAAGC,YAE3CmC,EAAItB,EAAO6B,GAAG3C,qBAAqB,KAAK,GAAGC,YAE/C2C,EAAYH,aAAalH,KAAKmH,eAAeP,GAAI5G,KAAKmH,eAAeN,IAAI,GAGzEQ,EAAYC,MAAMtH,KAAKI,eACvB,MAIJ,MAIJ,MAKJJ,KAAKuH,oBAMN,CACDvI,IAAK,cACL4D,MAAO,WAIL,IAHA,IACI2C,EADavF,KAAKkB,OAAOuD,qBAAqB,cAAc,GACxCA,qBAAqB,aAEpCe,EAAI,EAAGA,EAAID,EAAO9G,OAAQ+G,IACjC,GAAID,EAAOC,GAAGC,aAAa,OAASzF,KAAK6B,YAAa,CACpD7B,KAAK+B,cAAgBwD,EAAOC,GAC5B,MAIJxF,KAAKuH,oBAGN,CACDvI,IAAK,iBACL4D,MAAO,SAASuE,eAAevE,OAC7BA,MAAQA,MAAM4E,QAAQ,WAAYxH,KAAKoC,SACvCQ,MAAQA,MAAM4E,QAAQ,WAAYxH,KAAKyC,SACvCG,MAAQA,MAAM4E,QAAQ,SAAUxH,KAAKyC,SACrCG,MAAQA,MAAM4E,QAAQ,SAAUxH,KAAKyC,SACrCG,MAAQA,MAAM4E,QAAQ,UAAWxH,KAAKsB,QACtCsB,MAAQA,MAAM4E,QAAQ,UAAWxH,KAAKuB,QACtCqB,MAAQA,MAAM4E,QAAQ,UAA2B,IAAhBhH,KAAKC,UACtCmC,MAAQA,MAAM4E,QAAQ,SAAUxH,KAAKmC,OACrCS,MAAQA,MAAM4E,QAAQ,UAAWxH,KAAKwB,QACtCoB,MAAQA,MAAM4E,QAAQ,UAAWxH,KAAKyB,QACtC,IAAIgG,IAAM,EAEV,IACEA,IAAMC,KAAK9E,OACX,MAAO+E,GACPhE,QAAQC,MAAM,qCAAuChB,MAAQ,wBAA0B+E,EAAIC,SAG7F,OAAOH,MAMR,CACDzI,IAAK,qBACL4D,MAAO,SAA4BiF,GACjC,IAAIC,EAAWD,EAAWpD,qBAAqB,QAE3Cc,EADavF,KAAKkB,OAAOuD,qBAAqB,cAAc,GACxCA,qBAAqB,aACzCuC,EAAO,EACPe,GAAY,EAEhB,GAAuB,GAAnBD,EAASrJ,OAaX,OAXIuB,KAAKD,SAEHT,gBAAgBqE,QAAQgB,IAAI,gBAChChE,SAAS6B,KAAKwF,YAAYhI,KAAKe,SAC/BJ,SAAS6B,KAAKwF,YAAYhI,KAAKU,SAI/BV,KAAKmF,gBAGA,EAGT,IAAK,IAAIK,EAAI,EAAGA,EAAIsC,EAASrJ,OAAQ+G,IACnCwB,GAAQtB,SAASoC,EAAStC,GAAGC,aAAa,gBAG5C,IAAIwB,EAAOzG,KAAKC,SAAWuG,EACvBiB,EAAQ,EAGZ,IAFAjB,EAAO,EAEFxB,EAAI,EAAGA,EAAIsC,EAASrJ,OAAQ+G,IAG/B,IAFAwB,GAAQtB,SAASoC,EAAStC,GAAGC,aAAa,kBAE9BwB,EAAM,CAChBgB,EAAQzC,EACR,MAIJ,IAAKA,EAAI,EAAGA,EAAID,EAAO9G,OAAQ+G,IAC7B,GAAID,EAAOC,GAAGC,aAAa,OAASqC,EAASG,GAAOvD,YAAa,CAC/D1E,KAAK6B,YAAc0D,EAAOC,GAAGC,aAAa,MAC1CzF,KAAK8B,cAAgB,EACrB9B,KAAK+B,cAAgBwD,EAAOC,GAC5BuC,GAAY,EACZ,MAIJ,GAAIA,EACF,CAEMxC,EADavF,KAAKkB,OAAOuD,qBAAqB,UAAU,GACpCA,qBAAqB,SAE7C,IAAKe,EAAI,EAAGA,EAAID,EAAO9G,OAAQ+G,IAC7B,GAAID,EAAOC,GAAGC,aAAa,gBAAkBzF,KAAK6B,YAAa,CACzDvC,gBAAgBqE,QAAQgB,IAAI,wBAChC,IAAI0C,EAAc,IAAIxH,OAAO,MAAM,GACnCwH,EAAYxF,YAAc0D,EAAOC,GAAGf,qBAAqB,QAAQ,GAAGC,YACpE,IAAIkC,EAAIrB,EAAOC,GAAGf,qBAAqB,KAAK,GAAGC,YAC3CmC,EAAItB,EAAOC,GAAGf,qBAAqB,KAAK,GAAGC,YAE/C2C,EAAYH,aAAalH,KAAKmH,eAAeP,GAAI5G,KAAKmH,eAAeN,IAAI,GAEzEQ,EAAYC,MAAMtH,KAAKI,eACvB,OAKR,OAAO2H,IAMR,CACD/I,IAAK,oBACL4D,MAAO,WACL,IAEIsF,EAFAtB,EAAI5G,KAAKwB,OACTqF,EAAI7G,KAAKyB,OAASzB,KAAKuB,OAEvB4G,EAAS,GAGb,IAAK,IAAIF,KAFLjI,KAAKkC,cAAaiG,EAAS,GAEb3I,eAGhB,IAFA,IAAI4I,EAAMzH,SAAS6B,KAAKiC,qBAAqBjF,eAAeyI,IAEnDzJ,EAAI,EAAGA,EAAI4J,EAAI3J,OAAQD,IAG9B,GAAIqI,GAFJqB,EAAOE,EAAI5J,GAAG6J,yBAEDtC,IAAM,GAAKc,EAAIqB,EAAKnC,IAAMoC,GACjCvB,EAAIsB,EAAKpC,MAAQc,EAAIsB,EAAKI,MAAQtI,KAAKsB,OAAQ,CACjD,IAAIuE,EAAQlG,OAAO4I,iBAAiBH,EAAI5J,IAExC,GAA4B,IAAxBqH,EAAM2C,gBAAgD,QAAxB3C,EAAM2C,gBAA6C,QAAjB3C,EAAMa,QACxE,OAAO0B,EAAI5J,GAOrB,OAAO,IAMR,CACDQ,IAAK,gBACL4D,MAAO,SAAuB6F,EAAUC,EAAWC,GACjD,GAAK3I,KAAK+B,eAAkB/B,KAAK+B,cAAc0C,qBAAqBgE,GAApE,CAEA,GAAIzI,KAAK+B,cAAc0C,qBAAqBgE,GAAU,GAAGhE,qBAAqBiE,GAAW,GAAI,CAC3F,IAAI9F,EAAQ5C,KAAK+B,cAAc0C,qBAAqBgE,GAAU,GAAGhE,qBAAqBiE,GAAW,GAAGhE,YACpG,OAAO1E,KAAKmH,eAAevE,GAE3B,OAAO+F,KAOV,CACD3J,IAAK,kBACL4D,MAAO,WACL,IAAI5C,KAAKmB,aAAT,CAEA,IA0BI8G,EA1BAW,EAAK5I,KAAK6I,cAAc,QAAS,IAAK,GAEtCC,EAAK9I,KAAK6I,cAAc,QAAS,IAAK,GAMtCE,GAJO/I,KAAK6I,cAAc,QAAS,UAAW,GAEvC7I,KAAK6I,cAAc,QAAS,UAAW,GAEvC7I,KAAK6I,cAAc,QAAS,WAAY,MAE/CG,EAAKhJ,KAAK6I,cAAc,MAAO,IAAK,GAEpCI,EAAKjJ,KAAK6I,cAAc,MAAO,IAAK,GAMpCK,GAJOlJ,KAAK6I,cAAc,MAAO,UAAW,GAErC7I,KAAK6I,cAAc,MAAO,WAAY,GAEtC7I,KAAK6I,cAAc,MAAO,WAAY,MAE7CM,EAASnJ,KAAKmH,eAAenH,KAAK+B,cAAc0C,qBAAqB,YAAY,GAAGgB,aAAa,WAEjG2D,EAAapJ,KAAK+B,cAAc0C,qBAAqB,YAAY,GAAGgB,aAAa,cACjF4D,EAAUrJ,KAAK+B,cAAc0C,qBAAqB,WAClD6E,EAAStJ,KAAK+B,cAAc0C,qBAAqB,UACjD8E,EAAQvJ,KAAK+B,cAAc0C,qBAAqB,SAAShG,QAAUuB,KAAK+B,cAAc0C,qBAAqB,SAAShG,OAAS2K,GAAcD,EAM/I,GAJkFlB,EAA9EjI,KAAK8B,cAAgB9B,KAAK+B,cAAc0C,qBAAqB,SAAShG,OAAgBuB,KAAK+B,cAAc0C,qBAAqB,SAASzE,KAAK8B,eAAe4C,YAAmC,GAAd0E,EAAyBpJ,KAAK+B,cAAc0C,qBAAqB,SAASzE,KAAK8B,cAAgB9B,KAAK+B,cAAc0C,qBAAqB,SAAShG,QAAQiG,YAAyB1E,KAAK+B,cAAc0C,qBAAqB,SAASiB,SAAS0D,GAAc1D,UAAU1F,KAAK8B,cAAgBsH,IAAepJ,KAAK+B,cAAc0C,qBAAqB,SAAShG,OAAS2K,KAAc1E,YACniB1E,KAAKc,OAAO+E,MAAMC,MAAQ9F,KAAKsB,QAAU2G,EAAQjI,KAAKoB,QAAU,KAChEpB,KAAKc,OAAO+E,MAAME,KAAO/F,KAAKuB,OAASmE,SAASuC,EAAQjI,KAAKoB,QAAU,KAEnEpB,KAAK2B,UAAY3B,KAAK4B,QAGxB,OAFA5B,KAAK8B,qBACLmC,WAAWjE,KAAKuH,gBAAgBiC,KAAKxJ,MAAO,IAY9C,GARIA,KAAK0B,UACPkH,GAAMA,EACNI,GAAMA,GAGkB,GAAtBhJ,KAAK8B,cAAoB9B,KAAKkH,aAAa0B,EAAIE,GAAI,GAAY9I,KAAKkH,aAAaxB,SAASkD,GAAMlD,UAAUsD,EAAKJ,GAAM5I,KAAK8B,cAAgByH,GAAQ7D,SAASoD,GAAMpD,UAAUuD,EAAKH,GAAM9I,KAAK8B,cAAgByH,IAAQ,GACvNvJ,KAAK8B,gBAED9B,KAAK8B,eAAiByH,EAAO,CAC/B,GAAIvJ,KAAK+B,cAAc0C,qBAAqB,UAAU,GACpD,OAAQzE,KAAK+B,cAAc0C,qBAAqB,UAAU,GAAGC,aAC3D,IAAK,OACgC,iBAA/B1E,KAAKU,OAAOmF,MAAMc,WACpB3G,KAAKU,OAAOmF,MAAMc,UAAY,kBAC9B3G,KAAK0B,SAAU,IAEf1B,KAAKU,OAAOmF,MAAMc,UAAY,gBAC9B3G,KAAK0B,SAAU,GAUvB,IAAK1B,KAAKyJ,mBAAmBzJ,KAAK+B,cAAc0C,qBAAqB,YAAY,IAAK,OAGxF,IAAIiF,GAAU,EAEd,KAAIJ,GAAUA,EAAO,IAAMA,EAAO,GAAG7E,qBAAqB,UACpDuE,EAAK,GAAKhJ,KAAKwB,OAAS,GAC1BxB,KAAKwB,OAAS,EACdkI,GAAU,GACDV,EAAK,GAAKhJ,KAAKwB,OAASxB,KAAKoC,QAAUpC,KAAKsB,QACrDtB,KAAKwB,OAASxB,KAAKoC,QAAUpC,KAAKsB,OAClCtB,KAAKU,OAAOmF,MAAMC,KAAOJ,SAAS1F,KAAKwB,QAAU,KACjDkI,GAAU,GACDT,EAAK,GAAKjJ,KAAKyB,OAAS,GACjCzB,KAAKyB,OAAS,EACdiI,GAAU,GACDT,EAAK,GAAKjJ,KAAKyB,OAASzB,KAAKyC,QAAUzC,KAAKuB,QACrDvB,KAAKyB,OAASzB,KAAKyC,QAAUzC,KAAKuB,OAClCmI,GAAU,GACDT,EAAK,EACVjJ,KAAK2J,qBACH3J,KAAKyB,OAASzB,KAAKuB,SACrBvB,KAAKkC,YAAclC,KAAK2J,oBACxB3J,KAAKyB,OAASjB,KAAKoJ,KAAK5J,KAAKkC,YAAYmG,wBAAwBtC,KAAO/F,KAAKuB,OAC7EmI,GAAU,GAGL1J,KAAKkC,cACTlC,KAAK2J,sBACJ3J,KAAKyB,OAASzB,KAAKuB,OAASvB,KAAKkC,YAAYmG,wBAAwBtC,IAAM,GAAK/F,KAAKyB,OAASzB,KAAKuB,OAASvB,KAAKkC,YAAYmG,wBAAwBtC,IAAM,EAC7J/F,KAAKkC,YAAc,KACVlC,KAAKwB,OAASxB,KAAKkC,YAAYmG,wBAAwBvC,MAChE9F,KAAKwB,OAASkE,SAAS1F,KAAKwB,OAAS,GACrCkI,GAAU,IAEV1J,KAAKwB,OAASkE,SAAS1F,KAAKwB,OAAS,GACrCkI,GAAU,GAGZ1J,KAAKU,OAAOmF,MAAMC,KAAOJ,SAAS1F,KAAKwB,QAAU,OAIjDkI,IACG1J,KAAKyJ,mBAAmBH,EAAO,OAInCI,GAAWL,GAAWA,EAAQ,IAAMA,EAAQ,GAAG5E,qBAAqB,SACnEzE,KAAKyB,OAASzB,KAAKyC,QAAUzC,KAAKuB,OAAS,IACrB,MAApBvB,KAAKkC,YACPwH,GAAU,EAEL1J,KAAK2J,sBACRD,GAAU,EACV1J,KAAKkC,YAAc,MAInBwH,IACG1J,KAAKyJ,mBAAmBJ,EAAQ,MAK3C,OAAKK,IACC1J,KAAKwB,QAAUxB,KAAKsB,QAAU0H,EAAK,GAAKhJ,KAAKwB,OAASxB,KAAKoC,SAAW4G,EAAK,GAAKhJ,KAAKyB,QAAUzB,KAAKuB,QAAUuH,EAAK,GAAK9I,KAAKyB,OAASzB,KAAKyC,SAAWwG,EAAK,IAC7JS,GAAU,OAEL1J,KAAKD,SACRC,KAAKmF,sBAOXlB,WAAWjE,KAAKuH,gBAAgBiC,KAAKxJ,MAAO0F,SAASqD,GAAQrD,UAAUwD,EAAOH,GAAQ/I,KAAK8B,cAAgByH,OAM5G,CACDvK,IAAK,eACL4D,MAAO,SAAsBiH,GAC3B,IAAIC,EAAS9J,KAEb+J,MAAM,2DAA4D,CAChEC,YAAa,cACb9G,MAAO,gBACN+G,KAAK,SAAUC,GAChB,OAAOA,EAASC,SACfF,KAAK,SAAUE,GAChBxG,QAAQgB,IAAIwF,GAERA,EAAKC,MACPP,EAAQxG,iBAAiB,UAAW,SAAU0B,GAC5CA,EAAEC,iBACFD,EAAEsF,kBACF,IAAIC,EAAM3J,SAASC,cAAc,OACjC0J,EAAIzJ,aAAa,QAAS,0IAC1BgJ,EAAQhC,WAAW5C,YAAYqF,GAE/B,IAAIC,EAAQ,SAAe/E,IACzBgF,EAAM7J,SAASC,cAAc,MACzBC,aAAa,QAAS,iCAC1B2J,EAAIvF,YAAYtE,SAAS0F,eAAe8D,EAAKC,KAAK5E,GAAGiF,SACrDD,EAAInH,iBAAiB,QAAS,WACpB,IAAIxD,OAAOiK,EAAO7J,aACxBqH,MAAM,kDAAoD6C,EAAKC,KAAK5E,GAAGiF,OAAS,mBAElFX,EAAOY,WAETJ,EAAIrF,YAAYuF,IAGlB,IAAK,IAAIhF,KAAK2E,EAAKC,KAAM,CACvB,IAAII,EAEJD,EAAM/E,GAGR8E,EAAIjH,iBAAiB,QAAS,SAAU0B,GACtC8E,EAAQhC,WAAWG,YAAYsC,aAQpCzK,OAnvBiB","sourcesContent":["\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/*\r\n * Project:\r\n *                eSheep - Webpage\r\n *\r\n * Date:\r\n *                04.april 2018\r\n *\r\n * Author:\r\n *                Adriano Petrucci (http://esheep.petrucci.ch)\r\n *\r\n * Version:       0.9.3\r\n *\r\n * Introduction:\r\n *                As \"wrapper\" for the OpenSource C# project\r\n *                (see https://github.com/Adrianotiger/desktopPet),\r\n *                this javascript \"class\" was written to get the animations also inside your\r\n *                webpage. It doesn't work like the Windows version, but show much animations from it.\r\n *\r\n * Description:\r\n *                Add a walking pet (sheep to your home page) with just a few lines of code!\r\n *                Will add a lovely sheep (stray sheep) and this will walk around your page and over\r\n *                all <hr>s and <div>s with a border. You can also select another animation, using your\r\n *                personal XML file or one from the database.\r\n *\r\n * How to use:\r\n *                Add this line in your <header>:\r\n *                <script src=\"https://adrianotiger.github.io/web-esheep/src/esheep.js\"></script>\r\n *                Add this lines in your <body> (at the end if possible):\r\n *                <script>\r\n                    var pet = new eSheep();\r\n                    pet.Start();\r\n                  </script>\r\n *                That's all!\r\n *\r\n * Requirement:\r\n *                Tested on IE11, Edge and Opera\r\n *\r\n * Changelog:\r\n *                Version 0.9.3 - 26.06.2022: (forked)\r\n *                  - Optimized XML file handling\r\n *                Version 0.9.2 - 30.08.2021:\r\n *                  - crispy stylesheet (pixel image and not antialiased)\r\n *                Version 0.9.0 - 11.07.2019:\r\n *                  - Updated animation link to the main project animation\r\n *                  - Recompiled with new Yarn version (security vulnerability)\r\n *                Version 0.8.0 - 29.05.2018:\r\n *                  - Moved animation files to github\r\n *                  - Added options to the script \r\n *                  - Load an animation from the GitHub animations from the popup window\r\n *                Version 0.7.1 - 04.04.2018:\r\n *                  - Add max-width: none to ensure the image is properly shown\r\n *                Version 0.7 - 13.11.2017:\r\n *                  - better Javascript structure\r\n *                  - GitHub version (https://github.com/Adrianotiger/web-esheep)\r\n *                  - Childs animations added\r\n *                  - Better comments\r\n *                  - Replaced alerts with console.error\r\n *                Version 0.5 - 12.07.2017:\r\n *                  - animations starts only once the image was loaded (thanks RedSparr0w)\r\n *                Version 0.x:\r\n *                  - still beta versions...\r\n */\nvar VERSION = '0.9.3'; // web eSheep version\n\nvar ACTIVATE_DEBUG = false; // show log on console\n\nvar DEFAULT_XML = \"https://adrianotiger.github.io/desktopPet/Pets/esheep64/animations.xml\"; // default XML animation\n\nvar COLLISION_WITH = [\"div\", \"hr\"]; // elements on page to detect for collisions\n\nvar xmlStorage = new Object(); // stores parsed XML documents for repeated uses\n\nvar storageExists = typeof window.sessionStorage !== \"undefined\" && window.sessionStorage != null; // if sessionStorage doesn't exist on a webpage, the script will fallback to xmlStorage\n\n/*\r\n * eSheep class.\r\n * Create a new class of this type if you want a new pet. Will create the components for the pet.\r\n * Once created, you can call [variableName].Start() to start the animation with your desired pet.\r\n */\n\nvar eSheep = /*#__PURE__*/function () {\n  /* Parameters for options [default]:\r\n   * - allowPets: [none], all\r\n   * - allowPopup: [yes], no\r\n   */\n  function eSheep(options, isChild) {\n    _classCallCheck(this, eSheep);\n\n    this.userOptions = options ? options : {\n      allowPets: \"none\",\n      allowPopup: \"yes\"\n    };\n    if (!this.userOptions.allowPopup) this.userOptions.allowPopup = \"yes\";\n    if (!this.userOptions.allowPets) this.userOptions.allowPets = \"none\"; // CORS: Cross calls are not accepted by new browsers.\n\n    this.animationFile = DEFAULT_XML;\n    this.id = Date.now() + Math.random();\n    this.DOMdiv = document.createElement(\"div\"); // Div added to webpage, containing the sheep\n\n    this.DOMdiv.setAttribute(\"id\", this.id);\n    this.DOMimg = document.createElement(\"img\"); // Tile image, will be positioned inside the div\n\n    this.DOMinfo = document.createElement(\"div\"); // about dialog, if you press on the sheep\n\n    this.parser = new DOMParser(); // XML parser\n\n    this.xmlDoc = null; // parsed XML Document\n\n    this.prepareToDie = false; // when removed, animations should be stopped\n\n    this.isChild = isChild != null; // Child will be removed once they reached the end\n\n    this.tilesX = 1; // Quantity of images inside Tile\n\n    this.tilesY = 1; // Quantity of images inside Tile\n\n    this.imageW = 1; // Width of the sprite image\n\n    this.imageH = 1; // Height of the sprite image\n\n    this.imageX = 1; // Position of sprite inside webpage\n\n    this.imageY = 1; // Position of sprite inside webpage\n\n    this.flipped = false; // if sprite is flipped\n\n    this.dragging = false; // if user is dragging the sheep\n\n    this.infobox = false; // if infobox is visible\n\n    this.animationId = 0; // current animation ID\n\n    this.animationStep = 0; // current animation step\n\n    this.animationNode = null; // current animation DOM node\n\n    this.sprite = new Image(); // sprite image (Tiles)\n\n    this.HTMLelement = null; // the HTML element where the pet is walking on\n\n    this.randS = Math.random() * 100; // random value, will change when page is reloaded\n\n    this.screenW = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth; // window width\n\n    this.screenH = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight; // window height\n  }\n  /*\r\n   * Start new animation on the page.\r\n   * if animation is not set, the default sheep will be taken\r\n   */\n\n\n  _createClass(eSheep, [{\n    key: \"Start\",\n    value: function Start(animation) {\n      if (typeof animation !== 'undefined' && animation != null) {\n        this.animationFile = animation;\n      }\n\n      var ajax = new XMLHttpRequest();\n      var sheepClass = this;\n      var name = this.animationFile + \"-file\";\n      var cache = storageExists ? window.sessionStorage.getItem(name) : xmlStorage[name];\n\n      if (cache === null) {\n        ajax.open(\"GET\", this.animationFile, true);\n        ajax.addEventListener(\"readystatechange\", function () {\n          if (this.readyState == 4) {\n            if (this.status == 200) {\n              // successfully loaded XML, parse it and create first esheep.\n              if (storageExists) window.sessionStorage.setItem(name, this.responseText); // store it into the session storage\n              else xmlStorage[name] = this.responseText;\n              window.sessionStorage.setItem(name, this.responseText); // store it into the session storage\n\n              sheepClass._parseXML(this.responseText);\n            } else {\n              console.error(\"XML not available:\" + this.statusText + \"\\n\" + this.responseText);\n            }\n          }\n        });\n        ajax.send(null);\n      } else {\n        sheepClass._parseXML(cache);\n      }\n    }\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      var _this = this;\n\n      this.prepareToDie = true;\n      this.DOMinfo.Hide();\n      setTimeout(function () {\n        _this.DOMdiv = _this.DOMimg = _this.DOMinfo = null;\n        document.getElementById(_this.id).outerHTML = '';\n      }, 500);\n    }\n    /*\r\n     * Parse loaded XML, contains spawn, animations and childs\r\n     */\n\n  }, {\n    key: \"_parseXML\",\n    value: function _parseXML(text) {\n      var _this2 = this;\n\n      var cache = xmlStorage[this.animationFile];\n\n      if (cache === undefined) {\n        this.xmlDoc = this.parser.parseFromString(text, 'text/xml');\n        xmlStorage[this.animationFile] = this.xmlDoc; // store it in a temporary storage dictionary\n      } else {\n        this.xmlDoc = cache;\n      }\n\n      var image = this.xmlDoc.getElementsByTagName('image')[0];\n      this.tilesX = image.getElementsByTagName(\"tilesx\")[0].textContent;\n      this.tilesY = image.getElementsByTagName(\"tilesy\")[0].textContent; // Event listener: Sprite was loaded =>\n      //   play animation only when the sprite is loaded\n\n      this.sprite.addEventListener(\"load\", function () {\n        if (ACTIVATE_DEBUG) console.log(\"Sprite image loaded\");\n        var attribute = \"width:\" + _this2.sprite.width + \"px;\" + \"height:\" + _this2.sprite.height + \"px;\" + \"position:absolute;\" + \"top:0px;\" + \"left:0px;\" + \"max-width: none;\";\n\n        _this2.DOMimg.setAttribute(\"style\", attribute); // prevent to move image (will show the entire sprite sheet if not catched)\n\n\n        _this2.DOMimg.addEventListener(\"dragstart\", function (e) {\n          e.preventDefault();\n          return false;\n        });\n\n        _this2.imageW = _this2.sprite.width / _this2.tilesX;\n        _this2.imageH = _this2.sprite.height / _this2.tilesY;\n        attribute = \"width:\" + _this2.imageW + \"px;\" + \"height:\" + _this2.imageH + \"px;\" + \"position:fixed;\" + \"top:\" + _this2.imageY + \"px;\" + \"left:\" + _this2.imageX + \"px;\" + \"transform:rotatey(0deg);\" + \"cursor:move;\" + \"z-index:2000;\" + \"overflow:hidden;\" + \"image-rendering: crisp-edges;\";\n\n        _this2.DOMdiv.setAttribute(\"style\", attribute);\n\n        _this2.DOMdiv.appendChild(_this2.DOMimg);\n\n        if (_this2.isChild) _this2._spawnChild();else _this2._spawnESheep();\n      });\n      this.sprite.src = 'data:image/png;base64,' + image.getElementsByTagName(\"png\")[0].textContent;\n      this.DOMimg.setAttribute(\"src\", this.sprite.src); // Mouse move over eSheep, check if eSheep should be moved over the screen\n\n      this.DOMdiv.addEventListener(\"mousemove\", function (e) {\n        if (!_this2.dragging && e.buttons == 1 && e.button == 0) {\n          _this2.dragging = true;\n          _this2.HTMLelement = null;\n\n          var childsRoot = _this2.xmlDoc.getElementsByTagName('animations')[0];\n\n          var childs = childsRoot.getElementsByTagName('animation');\n\n          for (var k = 0; k < childs.length; k++) {\n            if (childs[k].getElementsByTagName('name')[0].textContent == \"drag\") {\n              _this2.animationId = childs[k].getAttribute(\"id\");\n              _this2.animationStep = 0;\n              _this2.animationNode = childs[k];\n              break;\n            }\n          }\n        }\n      }); // Add event listener to body, if mouse moved too fast over the dragging eSheep\n\n      document.body.addEventListener(\"mousemove\", function (e) {\n        if (_this2.dragging) {\n          _this2.imageX = parseInt(e.clientX) - _this2.imageW / 2;\n          _this2.imageY = parseInt(e.clientY) - _this2.imageH / 2;\n          _this2.DOMdiv.style.left = _this2.imageX + \"px\";\n          _this2.DOMdiv.style.top = _this2.imageY + \"px\";\n          _this2.DOMinfo.style.left = parseInt(_this2.imageX + _this2.imageW / 2) + \"px\";\n          _this2.DOMinfo.style.top = _this2.imageY + \"px\";\n        }\n      }); // Window resized, recalculate eSheep bounds\n\n      document.body.addEventListener(\"resize\", function () {\n        _this2.screenW = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n        _this2.screenH = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n\n        if (_this2.imageY + _this2.imageH > _this2.screenH) {\n          _this2.imageY = _this2.screenH - _this2.imageH;\n          _this2.DOMdiv.style.top = _this2.imageY + \"px\";\n        }\n\n        if (_this2.imageX + _this2.imageW > _this2.screenW) {\n          _this2.imageX = _this2.screenW - _this2.imageW;\n          _this2.DOMdiv.style.left = _this2.imageX + \"px\";\n        }\n      }); // Don't allow contextmenu over the sheep\n\n      this.DOMdiv.addEventListener(\"contextmenu\", function (e) {\n        e.preventDefault();\n        return false;\n      }); // Mouse released\n\n      this.DOMdiv.addEventListener(\"mouseup\", function (e) {\n        if (_this2.dragging) {\n          _this2.dragging = false;\n        } else if (_this2.infobox) {\n          _this2.DOMinfo.Hide();\n\n          _this2.infobox = false;\n        } else {\n          if (_this2.userOptions.allowPopup === \"yes\") {\n            _this2.DOMinfo.style.left = Math.min(_this2.screenW - _this2.imageW, Math.max(_this2.imageW, parseInt(_this2.imageX + _this2.imageW / 2))) + \"px\";\n            _this2.DOMinfo.style.top = parseInt(_this2.imageY) + \"px\";\n\n            _this2.DOMinfo.Show();\n\n            _this2.infobox = true;\n          }\n        }\n      }); // Mouse released over the info box\n\n      this.DOMinfo.addEventListener(\"mouseup\", function (e) {\n        _this2.DOMinfo.Hide();\n\n        _this2.infobox = false;\n      }); // Create About box\n\n      var attribute = \"width:200px;\" + \"height:100px;\" + \"transform:translate(-50%, -50%) scale(0.1);\" + \"position:fixed;\" + \"top:100px;left:10px;\" + \"display:none;\" + \"border-width:2px;\" + \"border-radius:5px;\" + \"border-style:ridge;\" + \"border-color:#0000ab;\" + \"text-align:center;\" + \"text-shadow: 1px 1px 3px #ffff88;\" + \"box-shadow: 3px 3px 10px #888888;\" + \"color:black;\" + \"opacity:0.9;\" + \"z-index:9999;\" + \"overflow:auto;\" + \"transition:transform 0.3s ease;\" + \"background: linear-gradient(to bottom right, rgba(128,128,255,0.7), rgba(200,200,255,0.4));\";\n      this.DOMinfo.setAttribute(\"style\", attribute);\n      var headerNode = this.xmlDoc.getElementsByTagName('header')[0];\n      var htmlT = document.createElement(\"b\").appendChild(document.createTextNode(headerNode.getElementsByTagName('title')[0].textContent));\n      var htmlV = document.createElement(\"sup\");\n      var htmlL = document.createElement(\"a\");\n      var htmlP = document.createElement(\"p\");\n      htmlV.appendChild(document.createTextNode(\"App v.\" + VERSION));\n      htmlV.appendChild(document.createElement(\"br\"));\n      htmlV.appendChild(document.createTextNode(\"Pet v.\" + headerNode.getElementsByTagName('version')[0].textContent));\n      htmlV.setAttribute(\"style\", \"float:right;text-align:right;\");\n      htmlL.appendChild(document.createTextNode(\"\\uD83C\\uDFE0\"));\n      htmlL.setAttribute(\"href\", \"https://github.com/Adrianotiger/web-esheep\");\n      htmlL.setAttribute(\"target\", \"_blank\");\n      htmlL.setAttribute(\"style\", \"float:left\");\n      htmlP.appendChild(document.createTextNode(headerNode.getElementsByTagName('info')[0].textContent));\n      htmlP.setAttribute(\"style\", \"font-size:\" + (100 - parseInt(headerNode.getElementsByTagName('info')[0].textContent.length / 10)) + \"%;\");\n      this.DOMinfo.appendChild(htmlV);\n      this.DOMinfo.appendChild(htmlL);\n\n      if (this.userOptions.allowPets !== \"none\") {\n        htmlL = document.createElement(\"a\");\n        htmlL.appendChild(document.createTextNode(\"\\u2699\"));\n        htmlL.setAttribute(\"href\", \"javascript:;\");\n        htmlL.setAttribute(\"style\", \"float:left\");\n        this.DOMinfo.appendChild(htmlL);\n        setTimeout(function () {\n          _this2._loadPetList(htmlL);\n        }, 100);\n      }\n\n      this.DOMinfo.appendChild(htmlT);\n      this.DOMinfo.appendChild(document.createElement(\"br\"));\n      this.DOMinfo.appendChild(document.createElement(\"hr\"));\n      this.DOMinfo.appendChild(htmlP); // Add about and sheep elements to the body\n\n      document.body.appendChild(this.DOMinfo);\n      document.body.appendChild(this.DOMdiv);\n\n      this.DOMinfo.Show = function () {\n        _this2.DOMinfo.style.display = \"block\";\n        _this2.DOMinfo.style.transform = \"translate(-50%, -100%) scale(1.0)\";\n      };\n\n      this.DOMinfo.Hide = function () {\n        _this2.DOMinfo.style.transform = \"translate(-50%, -50%) scale(0.1)\";\n        setTimeout(function () {\n          _this2.DOMinfo.style.display = \"none\";\n        }, 300);\n      };\n    }\n  }, {\n    key: \"_setPosition\",\n    value:\n    /*\r\n     * Set new position for the pet\r\n     * If absolute is true, the x and y coordinates are used as absolute values.\r\n     * If false, x and y are added to the current position\r\n     */\n    function _setPosition(x, y, absolute) {\n      if (this.DOMdiv) {\n        if (absolute) {\n          this.imageX = parseInt(x);\n          this.imageY = parseInt(y);\n        } else {\n          this.imageX = parseInt(this.imageX) + parseInt(x);\n          this.imageY = parseInt(this.imageY) + parseInt(y);\n        }\n\n        this.DOMdiv.style.left = this.imageX + \"px\";\n        this.DOMdiv.style.top = this.imageY + \"px\";\n      }\n    }\n    /*\r\n     * Spawn new esheep, this is called if the XML was loaded successfully\r\n     */\n\n  }, {\n    key: \"_spawnESheep\",\n    value: function _spawnESheep() {\n      var spawnsRoot = this.xmlDoc.getElementsByTagName('spawns')[0];\n      var spawns = spawnsRoot.getElementsByTagName('spawn');\n      var prob = 0;\n\n      for (var i = 0; i < spawns.length; i++) {\n        prob += parseInt(spawns[0].getAttribute(\"probability\"));\n      }\n\n      var rand = Math.random() * prob;\n      prob = 0;\n\n      for (i = 0; i < spawns.length; i++) {\n        prob += parseInt(spawns[i].getAttribute(\"probability\"));\n\n        if (prob >= rand || i == spawns.length - 1) {\n          this._setPosition(this._parseKeyWords(spawns[i].getElementsByTagName('x')[0].textContent), this._parseKeyWords(spawns[i].getElementsByTagName('y')[0].textContent), true);\n\n          if (ACTIVATE_DEBUG) console.log(\"Spawn: \" + this.imageX + \", \" + this.imageY);\n          this.animationId = spawns[i].getElementsByTagName('next')[0].textContent;\n          this.animationStep = 0;\n          var childsRoot = this.xmlDoc.getElementsByTagName('animations')[0];\n          var childs = childsRoot.getElementsByTagName('animation');\n\n          for (var k = 0; k < childs.length; k++) {\n            if (childs[k].getAttribute(\"id\") == this.animationId) {\n              this.animationNode = childs[k]; // Check if child should be loaded toghether with this animation\n\n              var childsRoot = this.xmlDoc.getElementsByTagName('childs')[0];\n              var childs = childsRoot.getElementsByTagName('child');\n\n              for (var j = 0; j < childs.length; j++) {\n                if (childs[j].getAttribute(\"animationid\") == this.animationId) {\n                  if (ACTIVATE_DEBUG) console.log(\"Child from Spawn\");\n                  var eSheepChild = new eSheep(null, true);\n                  eSheepChild.animationId = childs[j].getElementsByTagName('next')[0].textContent;\n                  var x = childs[j].getElementsByTagName('x')[0].textContent; //\n\n                  var y = childs[j].getElementsByTagName('y')[0].textContent;\n\n                  eSheepChild._setPosition(this._parseKeyWords(x), this._parseKeyWords(y), true); // Start animation\n\n\n                  eSheepChild.Start(this.animationFile);\n                  break;\n                }\n              }\n\n              break;\n            }\n          }\n\n          break;\n        }\n      } // Play next step\n\n\n      this._nextESheepStep();\n    }\n    /*\r\n     * Like spawnESheep, but for Childs\r\n     */\n\n  }, {\n    key: \"_spawnChild\",\n    value: function _spawnChild() {\n      var childsRoot = this.xmlDoc.getElementsByTagName('animations')[0];\n      var childs = childsRoot.getElementsByTagName('animation');\n\n      for (var k = 0; k < childs.length; k++) {\n        if (childs[k].getAttribute(\"id\") == this.animationId) {\n          this.animationNode = childs[k];\n          break;\n        }\n      }\n\n      this._nextESheepStep();\n    } // Parse the human readable expression from XML to a computer readable expression\n\n  }, {\n    key: \"_parseKeyWords\",\n    value: function _parseKeyWords(value) {\n      value = value.replace(/screenW/g, this.screenW);\n      value = value.replace(/screenH/g, this.screenH);\n      value = value.replace(/areaW/g, this.screenH);\n      value = value.replace(/areaH/g, this.screenH);\n      value = value.replace(/imageW/g, this.imageW);\n      value = value.replace(/imageH/g, this.imageH);\n      value = value.replace(/random/g, Math.random() * 100);\n      value = value.replace(/randS/g, this.randS);\n      value = value.replace(/imageX/g, this.imageX);\n      value = value.replace(/imageY/g, this.imageY);\n      var ret = 0;\n\n      try {\n        ret = eval(value);\n      } catch (err) {\n        console.error(\"Unable to parse this position: \\n'\" + value + \"'\\n Error message: \\n\" + err.message);\n      }\n\n      return ret;\n    }\n    /*\r\n     * Once the animation is over, get the next animation to play\r\n     */\n\n  }, {\n    key: \"_getNextRandomNode\",\n    value: function _getNextRandomNode(parentNode) {\n      var baseNode = parentNode.getElementsByTagName('next');\n      var childsRoot = this.xmlDoc.getElementsByTagName('animations')[0];\n      var childs = childsRoot.getElementsByTagName('animation');\n      var prob = 0;\n      var nodeFound = false; // no more animations (it was the last one)\n\n      if (baseNode.length == 0) {\n        // If it is a child, remove the child from document\n        if (this.isChild) {\n          // remove child\n          if (ACTIVATE_DEBUG) console.log(\"Remove child\");\n          document.body.removeChild(this.DOMinfo);\n          document.body.removeChild(this.DOMdiv);\n          delete this;\n        } // else, spawn sheep again\n        else {\n          this._spawnESheep();\n        }\n\n        return false;\n      }\n\n      for (var k = 0; k < baseNode.length; k++) {\n        prob += parseInt(baseNode[k].getAttribute(\"probability\"));\n      }\n\n      var rand = Math.random() * prob;\n      var index = 0;\n      prob = 0;\n\n      for (k = 0; k < baseNode.length; k++) {\n        prob += parseInt(baseNode[k].getAttribute(\"probability\"));\n\n        if (prob >= rand) {\n          index = k;\n          break;\n        }\n      }\n\n      for (k = 0; k < childs.length; k++) {\n        if (childs[k].getAttribute(\"id\") == baseNode[index].textContent) {\n          this.animationId = childs[k].getAttribute(\"id\");\n          this.animationStep = 0;\n          this.animationNode = childs[k];\n          nodeFound = true;\n          break;\n        }\n      }\n\n      if (nodeFound) // create Child, if present\n        {\n          var childsRoot = this.xmlDoc.getElementsByTagName('childs')[0];\n          var childs = childsRoot.getElementsByTagName('child');\n\n          for (k = 0; k < childs.length; k++) {\n            if (childs[k].getAttribute(\"animationid\") == this.animationId) {\n              if (ACTIVATE_DEBUG) console.log(\"Child from Animation\");\n              var eSheepChild = new eSheep(null, true);\n              eSheepChild.animationId = childs[k].getElementsByTagName('next')[0].textContent;\n              var x = childs[k].getElementsByTagName('x')[0].textContent;\n              var y = childs[k].getElementsByTagName('y')[0].textContent;\n\n              eSheepChild._setPosition(this._parseKeyWords(x), this._parseKeyWords(y), true);\n\n              eSheepChild.Start(this.animationFile);\n              break;\n            }\n          }\n        }\n\n      return nodeFound;\n    }\n    /*\r\n     * Check if sheep is walking over a defined HTML TAG-element\r\n     */\n\n  }, {\n    key: \"_checkOverlapping\",\n    value: function _checkOverlapping() {\n      var x = this.imageX;\n      var y = this.imageY + this.imageH;\n      var rect;\n      var margin = 20;\n      if (this.HTMLelement) margin = 5;\n\n      for (var index in COLLISION_WITH) {\n        var els = document.body.getElementsByTagName(COLLISION_WITH[index]);\n\n        for (var i = 0; i < els.length; i++) {\n          rect = els[i].getBoundingClientRect();\n\n          if (y > rect.top - 2 && y < rect.top + margin) {\n            if (x > rect.left && x < rect.right - this.imageW) {\n              var style = window.getComputedStyle(els[i]);\n\n              if (style.borderTopStyle != \"\" && style.borderTopStyle != \"none\" && style.display != \"none\") {\n                return els[i];\n              }\n            }\n          }\n        }\n      }\n\n      return false;\n    }\n    /*\r\n     * Try to get the value of a node (from the current animationNode), if it is not possible returns the defaultValue\r\n     */\n\n  }, {\n    key: \"_getNodeValue\",\n    value: function _getNodeValue(nodeName, valueName, defaultValue) {\n      if (!this.animationNode || !this.animationNode.getElementsByTagName(nodeName)) return;\n\n      if (this.animationNode.getElementsByTagName(nodeName)[0].getElementsByTagName(valueName)[0]) {\n        var value = this.animationNode.getElementsByTagName(nodeName)[0].getElementsByTagName(valueName)[0].textContent;\n        return this._parseKeyWords(value);\n      } else {\n        return defaultValue;\n      }\n    }\n    /*\r\n     * Next step (each frame is a step)\r\n     */\n\n  }, {\n    key: \"_nextESheepStep\",\n    value: function _nextESheepStep() {\n      if (this.prepareToDie) return;\n\n      var x1 = this._getNodeValue('start', 'x', 0);\n\n      var y1 = this._getNodeValue('start', 'y', 0);\n\n      var off1 = this._getNodeValue('start', 'offsety', 0);\n\n      var opa1 = this._getNodeValue('start', 'opacity', 1);\n\n      var del1 = this._getNodeValue('start', 'interval', 1000);\n\n      var x2 = this._getNodeValue('end', 'x', 0);\n\n      var y2 = this._getNodeValue('end', 'y', 0);\n\n      var off2 = this._getNodeValue('end', 'offsety', 0);\n\n      var opa2 = this._getNodeValue('end', 'interval', 1);\n\n      var del2 = this._getNodeValue('end', 'interval', 1000);\n\n      var repeat = this._parseKeyWords(this.animationNode.getElementsByTagName('sequence')[0].getAttribute('repeat'));\n\n      var repeatfrom = this.animationNode.getElementsByTagName('sequence')[0].getAttribute('repeatfrom');\n      var gravity = this.animationNode.getElementsByTagName('gravity');\n      var border = this.animationNode.getElementsByTagName('border');\n      var steps = this.animationNode.getElementsByTagName('frame').length + (this.animationNode.getElementsByTagName('frame').length - repeatfrom) * repeat;\n      var index;\n      if (this.animationStep < this.animationNode.getElementsByTagName('frame').length) index = this.animationNode.getElementsByTagName('frame')[this.animationStep].textContent;else if (repeatfrom == 0) index = this.animationNode.getElementsByTagName('frame')[this.animationStep % this.animationNode.getElementsByTagName('frame').length].textContent;else index = this.animationNode.getElementsByTagName('frame')[parseInt(repeatfrom) + parseInt((this.animationStep - repeatfrom) % (this.animationNode.getElementsByTagName('frame').length - repeatfrom))].textContent;\n      this.DOMimg.style.left = -this.imageW * (index % this.tilesX) + \"px\";\n      this.DOMimg.style.top = -this.imageH * parseInt(index / this.tilesX) + \"px\";\n\n      if (this.dragging || this.infobox) {\n        this.animationStep++;\n        setTimeout(this._nextESheepStep.bind(this), 50);\n        return;\n      }\n\n      if (this.flipped) {\n        x1 = -x1;\n        x2 = -x2;\n      }\n\n      if (this.animationStep == 0) this._setPosition(x1, y1, false);else this._setPosition(parseInt(x1) + parseInt((x2 - x1) * this.animationStep / steps), parseInt(y1) + parseInt((y2 - y1) * this.animationStep / steps), false);\n      this.animationStep++;\n\n      if (this.animationStep >= steps) {\n        if (this.animationNode.getElementsByTagName('action')[0]) {\n          switch (this.animationNode.getElementsByTagName('action')[0].textContent) {\n            case \"flip\":\n              if (this.DOMdiv.style.transform == \"rotateY(0deg)\") {\n                this.DOMdiv.style.transform = \"rotateY(180deg)\";\n                this.flipped = true;\n              } else {\n                this.DOMdiv.style.transform = \"rotateY(0deg)\";\n                this.flipped = false;\n              }\n\n              break;\n\n            default:\n              break;\n          }\n        }\n\n        if (!this._getNextRandomNode(this.animationNode.getElementsByTagName('sequence')[0])) return;\n      }\n\n      var setNext = false;\n\n      if (border && border[0] && border[0].getElementsByTagName('next')) {\n        if (x2 < 0 && this.imageX < 0) {\n          this.imageX = 0;\n          setNext = true;\n        } else if (x2 > 0 && this.imageX > this.screenW - this.imageW) {\n          this.imageX = this.screenW - this.imageW;\n          this.DOMdiv.style.left = parseInt(this.imageX) + \"px\";\n          setNext = true;\n        } else if (y2 < 0 && this.imageY < 0) {\n          this.imageY = 0;\n          setNext = true;\n        } else if (y2 > 0 && this.imageY > this.screenH - this.imageH) {\n          this.imageY = this.screenH - this.imageH;\n          setNext = true;\n        } else if (y2 > 0) {\n          if (this._checkOverlapping()) {\n            if (this.imageY > this.imageH) {\n              this.HTMLelement = this._checkOverlapping();\n              this.imageY = Math.ceil(this.HTMLelement.getBoundingClientRect().top) - this.imageH;\n              setNext = true;\n            }\n          }\n        } else if (this.HTMLelement) {\n          if (!this._checkOverlapping()) {\n            if (this.imageY + this.imageH > this.HTMLelement.getBoundingClientRect().top + 3 || this.imageY + this.imageH < this.HTMLelement.getBoundingClientRect().top - 3) {\n              this.HTMLelement = null;\n            } else if (this.imageX < this.HTMLelement.getBoundingClientRect().left) {\n              this.imageX = parseInt(this.imageX + 3);\n              setNext = true;\n            } else {\n              this.imageX = parseInt(this.imageX - 3);\n              setNext = true;\n            }\n\n            this.DOMdiv.style.left = parseInt(this.imageX) + \"px\";\n          }\n        }\n\n        if (setNext) {\n          if (!this._getNextRandomNode(border[0])) return;\n        }\n      }\n\n      if (!setNext && gravity && gravity[0] && gravity[0].getElementsByTagName('next')) {\n        if (this.imageY < this.screenH - this.imageH - 2) {\n          if (this.HTMLelement == null) {\n            setNext = true;\n          } else {\n            if (!this._checkOverlapping()) {\n              setNext = true;\n              this.HTMLelement = null;\n            }\n          }\n\n          if (setNext) {\n            if (!this._getNextRandomNode(gravity[0])) return;\n          }\n        }\n      }\n\n      if (!setNext) {\n        if (this.imageX < -this.imageW && x2 < 0 || this.imageX > this.screenW && x2 > 0 || this.imageY < -this.imageH && y1 < 0 || this.imageY > this.screenH && y2 > 0) {\n          setNext = true;\n\n          if (!this.isChild) {\n            this._spawnESheep();\n          }\n\n          return;\n        }\n      }\n\n      setTimeout(this._nextESheepStep.bind(this), parseInt(del1) + parseInt((del2 - del1) * this.animationStep / steps));\n    }\n    /*\r\n     * Load Pet List from GitHub, so user can change it\r\n     */\n\n  }, {\n    key: \"_loadPetList\",\n    value: function _loadPetList(element) {\n      var _this3 = this;\n\n      fetch(\"https://adrianotiger.github.io/desktopPet/Pets/pets.json\", {\n        credentials: 'same-origin',\n        cache: \"force-cache\"\n      }).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        console.log(json);\n\n        if (json.pets) {\n          element.addEventListener(\"mouseup\", function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            var div = document.createElement(\"div\");\n            div.setAttribute(\"style\", \"position:absolute;left:0px;top:20px;width:183px;min-height:100px;background:linear-gradient(to bottom, #8080ff, #3030a1);color:yellow;\");\n            element.parentNode.appendChild(div);\n\n            var _loop = function _loop(k) {\n              pet = document.createElement(\"b\");\n              pet.setAttribute(\"style\", \"cursor:pointer;display:block;\");\n              pet.appendChild(document.createTextNode(json.pets[k].folder));\n              pet.addEventListener(\"click\", function () {\n                var x = new eSheep(_this3.userOptions);\n                x.Start(\"https://adrianotiger.github.io/desktopPet/Pets/\" + json.pets[k].folder + \"/animations.xml\");\n\n                _this3.remove();\n              });\n              div.appendChild(pet);\n            };\n\n            for (var k in json.pets) {\n              var pet;\n\n              _loop(k);\n            }\n\n            div.addEventListener(\"click\", function (e) {\n              element.parentNode.removeChild(div);\n            });\n          });\n        }\n      });\n    }\n  }]);\n\n  return eSheep;\n}();\n\n;"],"file":"../src/esheep.min.js"}